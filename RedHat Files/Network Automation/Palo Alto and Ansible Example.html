<!DOCTYPE html>
<!-- saved from url=(0057)https://packetswitch.co.uk/palo-alto-and-ansible-example/ -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Palo Alto and Ansible Example</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" type="text/css" href="./Palo Alto and Ansible Example_files/screen.css">

    <meta name="description" content="In this blog post, I will show you how to use Ansible to deploy configurations to the Palo Alto Firewalls.">
    <link rel="shortcut icon" href="https://packetswitch.co.uk/favicon.png" type="image/png">
    <link rel="canonical" href="https://packetswitch.co.uk/palo-alto-and-ansible-example/">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <link rel="amphtml" href="https://packetswitch.co.uk/palo-alto-and-ansible-example/amp/">
    
    <meta property="og:site_name" content="Packetswitch">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Palo Alto and Ansible Example">
    <meta property="og:description" content="In this blog post, I will show you how to use Ansible to deploy configurations to the Palo Alto Firewalls.">
    <meta property="og:url" content="https://packetswitch.co.uk/palo-alto-and-ansible-example/">
    <meta property="og:image" content="https://packetswitch.co.uk/content/images/2020/12/verification-1.PNG">
    <meta property="article:published_time" content="2020-12-22T15:36:32.000Z">
    <meta property="article:modified_time" content="2020-12-22T15:39:14.000Z">
    <meta property="article:tag" content="ansible">
    
    <meta property="article:publisher" content="https://www.facebook.com/Packetswitch-Networking-Blog-108752930966886">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Palo Alto and Ansible Example">
    <meta name="twitter:description" content="In this blog post, I will show you how to use Ansible to deploy configurations to the Palo Alto Firewalls.">
    <meta name="twitter:url" content="https://packetswitch.co.uk/palo-alto-and-ansible-example/">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="Suresh">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="ansible">
    <meta name="twitter:site" content="@tryghost">
    <meta property="og:image:width" content="1823">
    <meta property="og:image:height" content="1730">
    
    <script src="./Palo Alto and Ansible Example_files/osd.js.download"></script><script src="./Palo Alto and Ansible Example_files/f.txt"></script><script type="text/javascript" async="" src="./Palo Alto and Ansible Example_files/analytics.js.download"></script><script src="./Palo Alto and Ansible Example_files/f(1).txt" id="google_shimpl"></script><script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "Packetswitch",
        "url": "https://packetswitch.co.uk/",
        "logo": {
            "@type": "ImageObject",
            "url": {
                "@type": "ImageObject",
                "url": "https://packetswitch.co.uk/favicon.png",
                "width": 60,
                "height": 60
            }
        }
    },
    "author": {
        "@type": "Person",
        "name": "Suresh",
        "image": {
            "@type": "ImageObject",
            "url": "https://packetswitch.co.uk/content/images/2020/04/56970913_2759945207355156_696597855225249792_o.jpg",
            "width": 1080,
            "height": 1350
        },
        "url": "https://packetswitch.co.uk/author/suresh/",
        "sameAs": []
    },
    "headline": "Palo Alto and Ansible Example",
    "url": "https://packetswitch.co.uk/palo-alto-and-ansible-example/",
    "datePublished": "2020-12-22T15:36:32.000Z",
    "dateModified": "2020-12-22T15:39:14.000Z",
    "keywords": "ansible",
    "description": "In this blog post, I will show you how to use Ansible to deploy configurations\nto the Palo Alto Firewalls.\n\nSetting up the environment\nI&#x27;m using Ubuntu 18.04 server for this example.\n\n * Ansible Galaxy Role\n * pip\n * pan-os SDK\n\nPalo Alto Networks Ansible Galaxy Role\nhttps://ansible-pan.readthedocs.io/en/latest/\n\nThe Palo Alto Networks Ansible Galaxy role is a collection of modules that\nautomate configuration and operational tasks on Palo Alto Firewalls and\nPanorama. The underlying protocol uses",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://packetswitch.co.uk/"
    }
}
    </script>

    <meta name="generator" content="Ghost 3.13">
    <link rel="alternate" type="application/rss+xml" title="Packetswitch" href="https://packetswitch.co.uk/rss/">
    <link rel="stylesheet" href="./Palo Alto and Ansible Example_files/prism-tomorrow.min.css">
<link rel="stylesheet" href="./Palo Alto and Ansible Example_files/prism-line-numbers.min.css">     
      
<style>
    pre[class*=language-] {
        margin: 1.75em 0;
        font-size: 1.3rem;
        background: #111;
    }
</style>

<script data-ad-client="ca-pub-3964009355374916" async="" src="./Palo Alto and Ansible Example_files/f(2).txt" data-checked-head="true"></script>
    <meta name="google-site-verification" content="9GdmvfDJoiRMGW3JEvdIhrAWXL5n8uaiAJrjjfyNj9o">
<script src="./Palo Alto and Ansible Example_files/embed.js.download" data-timestamp="1617882173143"></script><meta http-equiv="origin-trial" content="A+b/H0b8RPXNaJgaNFpO0YOFuGK6myDQXlwnJB3SwzvNMfcndat4DZYMrP4ClJIzYWo3/yP2S+8FTZ/lpqbPAAEAAABueyJvcmlnaW4iOiJodHRwczovL2ltYXNkay5nb29nbGVhcGlzLmNvbTo0NDMiLCJmZWF0dXJlIjoiVHJ1c3RUb2tlbnMiLCJleHBpcnkiOjE2MjYyMjA3OTksImlzVGhpcmRQYXJ0eSI6dHJ1ZX0="><meta http-equiv="origin-trial" content="A9ZgbRtm4pU3oZiuNzOsKcC8ppFSZdcjP2qYcdQrFKVzkmiWH1kdYY1Mi9x7G8+PS8HV9Ha9Cz0gaMdKsiVZIgMAAAB7eyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiVHJ1c3RUb2tlbnMiLCJleHBpcnkiOjE2MjYyMjA3OTksImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"><meta http-equiv="origin-trial" content="AxL6oBxcpn5rQDPKSAs+d0oxNyJYq2/4esBUh3Yx5z8QfcLu+AU8iFCXYRcr/CEEfDnkxxLTsvXPJFQBxHfvkgMAAACBeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXRhZ3NlcnZpY2VzLmNvbTo0NDMiLCJmZWF0dXJlIjoiVHJ1c3RUb2tlbnMiLCJleHBpcnkiOjE2MjYyMjA3OTksImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"><meta http-equiv="origin-trial" content="A9KPtG5kl3oLTk21xqynDPGQ5t18bSOpwt0w6kGa6dEWbuwjpffmdUpR3W+faZDubGT+KIk2do0BX2ca16x8qAcAAACBeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiVHJ1c3RUb2tlbnMiLCJleHBpcnkiOjE2MjYyMjA3OTksImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"><meta http-equiv="origin-trial" content="A3HucHUo1oW9s+9kIKz8mLkbcmdaj5lxt3eiIMp1Nh49dkkBlg1Fhg4Fd/r0vL69mRRA36YutI9P/lJUfL8csQoAAACFeyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiQ29udmVyc2lvbk1lYXN1cmVtZW50IiwiZXhwaXJ5IjoxNjI2MjIwNzk5LCJpc1N1YmRvbWFpbiI6dHJ1ZSwiaXNUaGlyZFBhcnR5Ijp0cnVlfQ=="><meta http-equiv="origin-trial" content="A0OysezhLoCRYomumeYlubLurZTCmsjTb087OvtCy95jNM65cfEsbajrJnhaGwiTxhz38ZZbm+UhUwQuXfVPTg0AAACLeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiQ29udmVyc2lvbk1lYXN1cmVtZW50IiwiZXhwaXJ5IjoxNjI2MjIwNzk5LCJpc1N1YmRvbWFpbiI6dHJ1ZSwiaXNUaGlyZFBhcnR5Ijp0cnVlfQ=="><meta http-equiv="origin-trial" content="AxoOxdZQmIoA1WeAPDixRAeWDdgs7ZtVFfH2y19ziTgD1iaHE5ZGz2UdSjubkWvob9C5PrjUfkWi4ZSLgWk3Xg8AAACLeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXRhZ3NlcnZpY2VzLmNvbTo0NDMiLCJmZWF0dXJlIjoiQ29udmVyc2lvbk1lYXN1cmVtZW50IiwiZXhwaXJ5IjoxNjI2MjIwNzk5LCJpc1N1YmRvbWFpbiI6dHJ1ZSwiaXNUaGlyZFBhcnR5Ijp0cnVlfQ=="><meta http-equiv="origin-trial" content="A7+rMYR5onPnACrz+niKSeFdH3xw1IyHo2AZSHmxrofRk9w4HcQPMYcpBUKu6OQ6zsdxf4m/vqa6tG6Na4OLpAQAAAB4eyJvcmlnaW4iOiJodHRwczovL2ltYXNkay5nb29nbGVhcGlzLmNvbTo0NDMiLCJmZWF0dXJlIjoiQ29udmVyc2lvbk1lYXN1cmVtZW50IiwiZXhwaXJ5IjoxNjI2MjIwNzk5LCJpc1RoaXJkUGFydHkiOnRydWV9"><link rel="preload" href="./Palo Alto and Ansible Example_files/f(3).txt" as="script"><script type="text/javascript" src="./Palo Alto and Ansible Example_files/f(3).txt"></script><link rel="preload" href="./Palo Alto and Ansible Example_files/f(4).txt" as="script"><script type="text/javascript" src="./Palo Alto and Ansible Example_files/f(4).txt"></script><style id="fit-vids-style">.fluid-width-video-container{flex-grow: 1;width:100%;}.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style><link rel="prefetch" as="style" href="https://c.disquscdn.com/next/embed/styles/lounge.c82b267b396dfbc10ae5113342115da8.css"><link rel="prefetch" as="script" href="https://c.disquscdn.com/next/embed/common.bundle.f485ba8b89bf2153fdb9f493ec342aed.js"><link rel="prefetch" as="script" href="https://c.disquscdn.com/next/embed/lounge.bundle.5c8cd56736a07a84352a4d37a862a762.js"><link rel="prefetch" as="script" href="https://disqus.com/next/config.js"><script src="./Palo Alto and Ansible Example_files/alfie_v4.63f1ab6d6b9d5807dc0c94ef3fe0b851.js.download" async="" charset="UTF-8"></script></head>
<body class="post-template tag-ansible">

    <div class="site-wrapper">

        

<header class="site-header">
    <div class="outer site-nav-main">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left-wrapper">
        <div class="site-nav-left">
                <a class="site-nav-logo" href="https://packetswitch.co.uk/">Packetswitch</a>
            <div class="site-nav-content">
                    <ul class="nav" role="menu">
    <li class="nav-home" role="menuitem"><a href="https://packetswitch.co.uk/">Home</a></li>
    <li class="nav-cisco" role="menuitem"><a href="https://packetswitch.co.uk/tag/cisco/">Cisco</a></li>
    <li class="nav-aws" role="menuitem"><a href="https://packetswitch.co.uk/tag/aws/">AWS</a></li>
    <li class="nav-terraform" role="menuitem"><a href="https://packetswitch.co.uk/tag/terraform/">Terraform</a></li>
    <li class="nav-juniper" role="menuitem"><a href="https://packetswitch.co.uk/tag/juniper/">Juniper</a></li>
    <li class="nav-infographics" role="menuitem"><a href="https://packetswitch.co.uk/infographic/">Infographics</a></li>
    <li class="nav-about-me" role="menuitem"><a href="https://packetswitch.co.uk/about-me/">About me</a></li>
</ul>

                    <span class="nav-post-title dash">Palo Alto and Ansible Example</span>
            </div>
        </div>
    </div>
    <div class="site-nav-right">
            <ul class="nav" role="menu">
    <li class="nav-contact-me" role="menuitem"><a href="https://packetswitch.co.uk/contact-me/">CONTACT ME</a></li>
</ul>


    </div>
</nav>
    </div>
</div></header>


<main id="site-main" class="site-main outer">
    <div class="inner">

        <article class="post-full post tag-ansible no-image no-image">

            <header class="post-full-header">

                <section class="post-full-tags">
                    <a href="https://packetswitch.co.uk/tag/ansible/">ansible</a>
                </section>

                <h1 class="post-full-title">Palo Alto and Ansible Example</h1>


                <div class="post-full-byline">

                    <section class="post-full-byline-content">

                        <ul class="author-list">
                            <li class="author-list-item">

                                <div class="author-card">
                                    <img class="author-profile-image" src="./Palo Alto and Ansible Example_files/56970913_2759945207355156_696597855225249792_o.jpg" alt="Suresh">
                                    <div class="author-info">
                                        <h2>Suresh</h2>
                                        <p>Read <a href="https://packetswitch.co.uk/author/suresh/">more posts</a> by this author.</p>
                                    </div>
                                </div>

                                <a href="https://packetswitch.co.uk/author/suresh/" class="author-avatar">
                                    <img class="author-profile-image" src="./Palo Alto and Ansible Example_files/56970913_2759945207355156_696597855225249792_o.jpg" alt="Suresh">
                                </a>

                            </li>
                        </ul>

                        <section class="post-full-byline-meta">
                            <h4 class="author-name"><a href="https://packetswitch.co.uk/author/suresh/">Suresh</a></h4>
                            <div class="byline-meta-content">
                                <time class="byline-meta-date" datetime="2020-12-22">22 Dec 2020</time>
                                <span class="byline-reading-time"><span class="bull">•</span> 6 min read</span>
                            </div>
                        </section>

                    </section>


                </div>
            </header>


            <section class="post-full-content">
                <div class="post-content">
                    <p>In this blog post, I will show you how to use Ansible to deploy configurations to the Palo Alto Firewalls.</p><h2 id="setting-up-the-environment">Setting up the environment</h2><!--kg-card-begin: markdown--><p><strong>I'm using Ubuntu 18.04 server for this example.</strong></p>
<ul>
<li>Ansible Galaxy Role</li>
<li>pip</li>
<li>pan-os SDK</li>
</ul>
<!--kg-card-end: markdown--><h3 id="palo-alto-networks-ansible-galaxy-role">Palo Alto Networks Ansible Galaxy Role</h3><p><a href="https://ansible-pan.readthedocs.io/en/latest/">https://ansible-pan.readthedocs.io/en/latest/</a></p><p>The Palo Alto Networks Ansible Galaxy role is a collection of modules that automate configuration and operational tasks on Palo Alto Firewalls and Panorama. The underlying protocol uses API calls that are wrapped within the Ansible framework.</p><p>You can install the collection by using <code>ansible-galaxy collection install paloaltonetworks.panos</code> command</p><pre class=" line-numbers language-shell"><code class="  language-shell">ubuntu@ubuntu_1804:~/palo-ansible/playbooks$ ansible-galaxy collection <span class="token function">install</span> paloaltonetworks.panos
Process <span class="token function">install</span> dependency map
Starting collection <span class="token function">install</span> process
Installing <span class="token string">'paloaltonetworks.panos:2.4.0'</span> to <span class="token string">'/home/ubuntu/.ansible/collections/ansible_collections/paloaltonetworks/panos'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="install-pip">Install pip</h3><p>Pip is a package management system that simplifies installation and management of software packages written in Python.</p><p>You can install it by using <code>sudo apt install python-pip</code> command</p><h3 id="palo-alto-networks-pan-os-sdk-for-python">Palo Alto Networks PAN-OS SDK for Python</h3><figure class="kg-card kg-bookmark-card"><a class="kg-bookmark-container" href="https://pypi.org/project/pan-os-python/"><div class="kg-bookmark-content"><div class="kg-bookmark-title">pan-os-python</div><div class="kg-bookmark-description">Framework for interacting with Palo Alto Networks devices via API</div><div class="kg-bookmark-metadata"><img class="kg-bookmark-icon" src="./Palo Alto and Ansible Example_files/favicon.6a76275d.ico"><span class="kg-bookmark-publisher">PyPI</span></div></div><div class="kg-bookmark-thumbnail"><img src="./Palo Alto and Ansible Example_files/twitter.90915068.jpg"></div></a></figure><p>The PAN-OS SDK for Python (pan-os-python) is a package to help interact with Palo Alto Networks devices</p><pre class=" line-numbers language-shell"><code class="  language-shell">ubuntu@ubuntu_1804:~/palo-ansible/playbooks$ pip <span class="token function">install</span> pan-os-python
Collecting pan-os-python
  Downloading https://files.pythonhosted.org/packages/7b/3e/94d901ed6fc435307bdb34e5b7a8f2a69902a71f44a44a987c63359c5c1f/pan_os_python-1.0.2-py2.py3-none-any.whl <span class="token punctuation">(</span>122kB<span class="token punctuation">)</span>
    <span class="token number">100</span>% <span class="token operator">|</span>████████████████████████████████<span class="token operator">|</span> 122kB <span class="token number">2</span>.6MB/s 
Collecting pan-python<span class="token operator">&lt;</span><span class="token number">0.17</span>.0,<span class="token operator">&gt;</span><span class="token operator">=</span><span class="token number">0.16</span>.0 <span class="token punctuation">(</span>from pan-os-python<span class="token punctuation">)</span>
  Using cached https://files.pythonhosted.org/packages/3b/fd/20127311eae9c31b7ae3e47d2279da7aea2aab2bf9f50b19d56ef367735e/pan_python-0.16.0-py2.py3-none-any.whl
Installing collected packages: pan-python, pan-os-python
Successfully installed pan-os-python-1.0.2 pan-python-0.16.0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ansible-installation">Ansible Installation</h3><p>You can install Ansible by using this guide: <a href="https://docs.ansible.com/ansible/latest/installation_guide/intro_installation.html#installing-ansible-on-ubuntu">Installing Ansible — Ansible Documentation</a></p><figure class="kg-card kg-code-card"><pre class=" line-numbers language-shell"><code class="  language-shell">$ <span class="token function">sudo</span> <span class="token function">apt</span> update
$ <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> software-properties-common
$ <span class="token function">sudo</span> apt-add-repository --yes --update ppa:ansible/ansible
$ <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> ansible<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><figcaption>Ansible Installation</figcaption></figure><h3 id="ansible-files">Ansible files</h3><figure class="kg-card kg-code-card"><pre class=" line-numbers language-shell"><code class="  language-shell">ubuntu@ubuntu_1804:~/palo-ansible$ tree 
<span class="token builtin class-name">.</span>
├── inventory
│   └── host-file
└── playbooks
    ├── ansible.cfg
    └── palo.yml

<span class="token number">2</span> directories, <span class="token number">3</span> files<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><figcaption>Tree</figcaption></figure><figure class="kg-card kg-code-card"><pre class=" line-numbers language-yml"><code class="  language-yml">ubuntu@ubuntu_1804<span class="token punctuation">:</span>~/palo<span class="token punctuation">-</span>ansible$ cat inventory/host<span class="token punctuation">-</span>file 
<span class="token punctuation">[</span>palo<span class="token punctuation">]</span>
PALO<span class="token punctuation">-</span>1 ansible_host=192.168.1.65<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><figcaption>hosts</figcaption></figure><figure class="kg-card kg-code-card"><pre class=" line-numbers language-yml"><code class="  language-yml">ubuntu@ubuntu_1804<span class="token punctuation">:</span>~/palo<span class="token punctuation">-</span>ansible$ cat playbooks/ansible.cfg 
<span class="token punctuation">[</span>defaults<span class="token punctuation">]</span>
inventory = /home/ubuntu/palo<span class="token punctuation">-</span>ansible/inventory/host<span class="token punctuation">-</span>file<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><figcaption>Ansible.cfg</figcaption></figure><h2 id="diagram">Diagram</h2><figure class="kg-card kg-image-card kg-width-wide kg-card-hascaption"><img src="./Palo Alto and Ansible Example_files/diagram.PNG" class="kg-image"><figcaption>Diagram</figcaption></figure><blockquote>I created a local user name and password on the Palo Alto via the GUI</blockquote><h3 id="get-your-api-key">Get your API key</h3><p>In this example, I'm using the API key instead of using username/password. </p><p><a href="https://docs.paloaltonetworks.com/pan-os/9-0/pan-os-panorama-api/get-started-with-the-pan-os-xml-api/get-your-api-key.html">https://docs.paloaltonetworks.com/pan-os/9-0/pan-os-panorama-api/get-started-with-the-pan-os-xml-api/get-your-api-key.html</a></p><p>To use the API, you must generate the API key required for authenticating API calls. To generate an API key, make a <code>GET</code> or <code>POST</code> request to the firewall’s hostname or IP addresses using the administrative credentials and type <code>keygen</code></p><pre><code>curl -k -X GET 'https://&lt;firewall&gt;/api/?type=keygen&amp;user=&lt;username&gt;&amp;password=&lt;password&gt;'</code></pre><pre><code>curl -k -X POST 'https://192.168.1.65/api/?type=keygen&amp;user=ansible&amp;password=Cisco123'</code></pre><p>A successful API call returns <code>status="success"</code> along with the API key within the key element.</p><pre><code>&lt;response status = 'success'&gt;&lt;result&gt;&lt;key&gt;LUFRPT1lV0JxY1N0bWp5d2hpeCtIZ0Urc0oxZFdvQWM9c3RPNGhaeGpjLzA1N0JVRjJ5SGduZ252S2FrL09sL0JueUU5dlRITEdxcDl0bllxM3phbGc2K2FCdTNZZWVNdw==&lt;/key&gt;&lt;/result&gt;&lt;/response&gt;</code></pre><hr><h3 id="playbook">Playbook</h3><!--kg-card-begin: markdown--><p><strong>The Playbook creates the following</strong></p>
<ul>
<li>Create address-objects for <code>server1</code> and <code>users</code></li>
<li>Management Profile which allows ping to the <code>INSIDE</code> interface</li>
<li>Create <code>INSIDE</code> and <code>USERS</code> zones</li>
<li>Adding <code>eth1/1</code> and <code>eth1/2</code> interfaces to each zone.</li>
<li>Security rule allowing <code>ping</code> from <code>users-subnet</code> to <code>server1</code></li>
</ul>
<!--kg-card-end: markdown--><figure class="kg-card kg-code-card"><pre class=" line-numbers language-yml"><code class="  language-yml">ubuntu@ubuntu_1804<span class="token punctuation">:</span>~/palo<span class="token punctuation">-</span>ansible/playbooks$ cat palo.yml 
<span class="token punctuation">---</span>

<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Palo Alto Playbook
  <span class="token key atrule">hosts</span><span class="token punctuation">:</span> palo
  <span class="token key atrule">gather_facts</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">connection</span><span class="token punctuation">:</span> local

  <span class="token key atrule">collections</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> paloaltonetworks.panos


  <span class="token key atrule">vars</span><span class="token punctuation">:</span>
    <span class="token key atrule">palo_provider</span><span class="token punctuation">:</span>
      <span class="token key atrule">ip_address</span><span class="token punctuation">:</span> <span class="token string">'192.168.1.65'</span>
      <span class="token key atrule">api_key</span><span class="token punctuation">:</span> LUFRPT1lV0JxY1N0bWp5d2hpeCtIZ0Urc0oxZFdvQWM9c3RPNGhaeGpjLzA1N0JVRjJ5SGduZ252S2FrL09sL0JueUU5dlRITEdxcDl0bllxM3phbGc2K2FCdTNZZWVNdw==

  <span class="token key atrule">tasks</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Create Server Object
      <span class="token key atrule">panos_address_object</span><span class="token punctuation">:</span>
        <span class="token key atrule">provider</span><span class="token punctuation">:</span> <span class="token string">'{{ palo_provider }}'</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">'server1'</span>
        <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token string">'172.16.1.10'</span>
        <span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">'vmware'</span>

    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Create Users Object
      <span class="token key atrule">panos_address_object</span><span class="token punctuation">:</span>
        <span class="token key atrule">provider</span><span class="token punctuation">:</span> <span class="token string">'{{ palo_provider }}'</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">'users-subnet'</span>
        <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token string">'10.10.10.0/24'</span>
        <span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">'users subnet'</span>

    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Management Profile
      <span class="token key atrule">panos_management_profile</span><span class="token punctuation">:</span>
        <span class="token key atrule">provider</span><span class="token punctuation">:</span> <span class="token string">'{{ palo_provider }}'</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">'Allow Ping'</span>
        <span class="token key atrule">ping</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Create INSIDE Zone
      <span class="token key atrule">panos_zone</span><span class="token punctuation">:</span>
        <span class="token key atrule">provider</span><span class="token punctuation">:</span> <span class="token string">'{{ palo_provider}}'</span>
        <span class="token key atrule">zone</span><span class="token punctuation">:</span> <span class="token string">'INSIDE'</span>
        <span class="token key atrule">mode</span><span class="token punctuation">:</span> <span class="token string">'layer3'</span> 
    
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Create USERS Zone
      <span class="token key atrule">panos_zone</span><span class="token punctuation">:</span>
        <span class="token key atrule">provider</span><span class="token punctuation">:</span> <span class="token string">'{{ palo_provider}}'</span>
        <span class="token key atrule">zone</span><span class="token punctuation">:</span> <span class="token string">'USERS'</span>
        <span class="token key atrule">mode</span><span class="token punctuation">:</span> <span class="token string">'layer3'</span>

    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> ethernet1/1 config
      <span class="token key atrule">panos_interface</span><span class="token punctuation">:</span>
        <span class="token key atrule">provider</span><span class="token punctuation">:</span> <span class="token string">'{{ palo_provider }}'</span>
        <span class="token key atrule">if_name</span><span class="token punctuation">:</span> <span class="token string">'ethernet1/1'</span>
        <span class="token key atrule">zone_name</span><span class="token punctuation">:</span> <span class="token string">'INSIDE'</span>
        <span class="token key atrule">management_profile</span><span class="token punctuation">:</span> <span class="token string">'Allow Ping'</span>
        <span class="token key atrule">mode</span><span class="token punctuation">:</span> <span class="token string">'layer3'</span>
        <span class="token key atrule">enable_dhcp</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
        <span class="token key atrule">ip</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'172.16.1.1/24'</span><span class="token punctuation">]</span>

    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> ethernet1/2 config
      <span class="token key atrule">panos_interface</span><span class="token punctuation">:</span>
        <span class="token key atrule">provider</span><span class="token punctuation">:</span> <span class="token string">'{{ palo_provider }}'</span>
        <span class="token key atrule">if_name</span><span class="token punctuation">:</span> <span class="token string">'ethernet1/2'</span>
        <span class="token key atrule">zone_name</span><span class="token punctuation">:</span> <span class="token string">'USERS'</span>
        <span class="token key atrule">mode</span><span class="token punctuation">:</span> <span class="token string">'layer3'</span>
        <span class="token key atrule">enable_dhcp</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
        <span class="token key atrule">ip</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'10.10.10.1/24'</span><span class="token punctuation">]</span>

    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Allow ping from users to server1
      <span class="token key atrule">panos_security_rule</span><span class="token punctuation">:</span>
        <span class="token key atrule">provider</span><span class="token punctuation">:</span> <span class="token string">'{{ palo_provider }}'</span>
        <span class="token key atrule">rule_name</span><span class="token punctuation">:</span> <span class="token string">'allow ping'</span>
        <span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">'Allow ping from users to server1'</span>
        <span class="token key atrule">source_zone</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'USERS'</span><span class="token punctuation">]</span>
        <span class="token key atrule">source_ip</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'users-subnet'</span><span class="token punctuation">]</span>
        <span class="token key atrule">destination_zone</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'INSIDE'</span><span class="token punctuation">]</span>
        <span class="token key atrule">destination_ip</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'server1'</span><span class="token punctuation">]</span> 
        <span class="token key atrule">application</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'ping'</span><span class="token punctuation">]</span>
        <span class="token key atrule">action</span><span class="token punctuation">:</span> <span class="token string">'allow'</span>

    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Commit
      <span class="token key atrule">panos_commit</span><span class="token punctuation">:</span>
        <span class="token key atrule">provider</span><span class="token punctuation">:</span> <span class="token string">'{{ palo_provider }}'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><figcaption>Playbook</figcaption></figure><h2 id="verification">Verification</h2><figure class="kg-card kg-image-card kg-width-wide kg-card-hascaption"><img src="./Palo Alto and Ansible Example_files/verification.PNG" class="kg-image"><figcaption>verification</figcaption></figure><hr><h3 id="encrypting-sensitive-data-with-ansible-vault-">Encrypting sensitive data with Ansible Vault.</h3><p>Ansible Vault encrypts variables or files so, the sensitive data such as passwords or keys are not visible. In our example, we can see that the <code>api_key</code> is visible in the <strong>Playbook. </strong></p><p>I'm going to move the <code>palo_provider</code> variable to <code>group_vars</code> directory and add the <code>api_key</code> to the vault. </p><h2 id="create-a-vault-and-move-the-api_key">Create a vault and move the api_key</h2><pre class=" line-numbers language-shell"><code class="  language-shell">ubuntu@ubuntu_1804:~/palo-ansible/inventory/group_vars/palo$ ansible-vault create vault
New Vault password: 
Confirm New Vault password:<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class=" line-numbers language-yml"><code class="  language-yml">ubuntu@ubuntu_1804<span class="token punctuation">:</span>~/palo<span class="token punctuation">-</span>ansible/inventory/group_vars/palo$ ansible<span class="token punctuation">-</span>vault view vault
<span class="token key atrule">Vault password</span><span class="token punctuation">:</span> 
<span class="token punctuation">---</span>

<span class="token key atrule">vault_api_key</span><span class="token punctuation">:</span> LUFRPT1lV0JxY1N0bWp5d2hpeCtIZ0Urc0oxZFdvQWM9c3RPNGhaeGpjLzA1N0JVRjJ5SGduZ252S2FrL09sL0JueUU5dlRITEdxcDl0bllxM3phbGc2K2FCdTNZZWVNdw==<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class=" line-numbers language-yml"><code class="  language-yml">ubuntu@ubuntu_1804<span class="token punctuation">:</span>~/palo<span class="token punctuation">-</span>ansible/inventory/group_vars/palo$ cat palo.yml 
<span class="token key atrule">palo_provider</span><span class="token punctuation">:</span>
  <span class="token key atrule">ip_address</span><span class="token punctuation">:</span> <span class="token string">'192.168.1.65'</span>
  <span class="token key atrule">api_key</span><span class="token punctuation">:</span> <span class="token string">'{{ vault_api_key }}'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class=" line-numbers language-shell"><code class="  language-shell">ubuntu@ubuntu_1804:~/palo-ansible$ tree
<span class="token builtin class-name">.</span>
├── inventory
│   ├── group_vars			<span class="token operator">&lt;&lt;&lt;</span>
│   │   └── palo			<span class="token operator">&lt;&lt;&lt;</span>
│   │       ├── palo.yml	<span class="token operator">&lt;&lt;&lt;</span>
│   │       └── vault		<span class="token operator">&lt;&lt;&lt;</span>
│   └── host-file
└── playbooks
    ├── ansible.cfg
    └── palo.yml

<span class="token number">4</span> directories, <span class="token number">5</span> files<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class=" line-numbers language-yml"><code class="  language-yml"><span class="token punctuation">---</span>

<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Palo Alto Playbook
  <span class="token key atrule">hosts</span><span class="token punctuation">:</span> palo
  <span class="token key atrule">gather_facts</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">connection</span><span class="token punctuation">:</span> local

  <span class="token key atrule">collections</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> paloaltonetworks.panos

  <span class="token key atrule">tasks</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Create Server Object
      <span class="token key atrule">panos_address_object</span><span class="token punctuation">:</span>
        <span class="token key atrule">provider</span><span class="token punctuation">:</span> <span class="token string">'{{ palo_provider }}'</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">'server1'</span>
        <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token string">'172.16.1.10'</span>
        <span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">'vmware'</span>

    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Create Users Object
      <span class="token key atrule">panos_address_object</span><span class="token punctuation">:</span>
        <span class="token key atrule">provider</span><span class="token punctuation">:</span> <span class="token string">'{{ palo_provider }}'</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">'users-subnet'</span>
        <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token string">'10.10.10.0/24'</span>
        <span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">'users subnet'</span>

    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Management Profile
      <span class="token key atrule">panos_management_profile</span><span class="token punctuation">:</span>
        <span class="token key atrule">provider</span><span class="token punctuation">:</span> <span class="token string">'{{ palo_provider }}'</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">'Allow Ping'</span>
        <span class="token key atrule">ping</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Create INSIDE Zone
      <span class="token key atrule">panos_zone</span><span class="token punctuation">:</span>
        <span class="token key atrule">provider</span><span class="token punctuation">:</span> <span class="token string">'{{ palo_provider}}'</span>
        <span class="token key atrule">zone</span><span class="token punctuation">:</span> <span class="token string">'INSIDE'</span>
        <span class="token key atrule">mode</span><span class="token punctuation">:</span> <span class="token string">'layer3'</span> 
    
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Create USERS Zone
      <span class="token key atrule">panos_zone</span><span class="token punctuation">:</span>
        <span class="token key atrule">provider</span><span class="token punctuation">:</span> <span class="token string">'{{ palo_provider}}'</span>
        <span class="token key atrule">zone</span><span class="token punctuation">:</span> <span class="token string">'USERS'</span>
        <span class="token key atrule">mode</span><span class="token punctuation">:</span> <span class="token string">'layer3'</span>

    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> ethernet1/1 config
      <span class="token key atrule">panos_interface</span><span class="token punctuation">:</span>
        <span class="token key atrule">provider</span><span class="token punctuation">:</span> <span class="token string">'{{ palo_provider }}'</span>
        <span class="token key atrule">if_name</span><span class="token punctuation">:</span> <span class="token string">'ethernet1/1'</span>
        <span class="token key atrule">zone_name</span><span class="token punctuation">:</span> <span class="token string">'INSIDE'</span>
        <span class="token key atrule">management_profile</span><span class="token punctuation">:</span> <span class="token string">'Allow Ping'</span>
        <span class="token key atrule">mode</span><span class="token punctuation">:</span> <span class="token string">'layer3'</span>
        <span class="token key atrule">enable_dhcp</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
        <span class="token key atrule">ip</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'172.16.1.1/24'</span><span class="token punctuation">]</span>

    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> ethernet1/2 config
      <span class="token key atrule">panos_interface</span><span class="token punctuation">:</span>
        <span class="token key atrule">provider</span><span class="token punctuation">:</span> <span class="token string">'{{ palo_provider }}'</span>
        <span class="token key atrule">if_name</span><span class="token punctuation">:</span> <span class="token string">'ethernet1/2'</span>
        <span class="token key atrule">zone_name</span><span class="token punctuation">:</span> <span class="token string">'USERS'</span>
        <span class="token key atrule">mode</span><span class="token punctuation">:</span> <span class="token string">'layer3'</span>
        <span class="token key atrule">enable_dhcp</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
        <span class="token key atrule">ip</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'10.10.10.1/24'</span><span class="token punctuation">]</span>

    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Allow ping from users to server1
      <span class="token key atrule">panos_security_rule</span><span class="token punctuation">:</span>
        <span class="token key atrule">provider</span><span class="token punctuation">:</span> <span class="token string">'{{ palo_provider }}'</span>
        <span class="token key atrule">rule_name</span><span class="token punctuation">:</span> <span class="token string">'allow ping'</span>
        <span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">'Allow ping from users to server1'</span>
        <span class="token key atrule">source_zone</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'USERS'</span><span class="token punctuation">]</span>
        <span class="token key atrule">source_ip</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'users-subnet'</span><span class="token punctuation">]</span>
        <span class="token key atrule">destination_zone</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'INSIDE'</span><span class="token punctuation">]</span>
        <span class="token key atrule">destination_ip</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'server1'</span><span class="token punctuation">]</span> 
        <span class="token key atrule">application</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'ping'</span><span class="token punctuation">]</span>
        <span class="token key atrule">action</span><span class="token punctuation">:</span> <span class="token string">'allow'</span>

    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Commit
      <span class="token key atrule">panos_commit</span><span class="token punctuation">:</span>
        <span class="token key atrule">provider</span><span class="token punctuation">:</span> <span class="token string">'{{ palo_provider }}'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>The most straightforward way of <strong><strong>decrypting content</strong></strong> at runtime is to have Ansible prompt you for the appropriate credentials. You can do this by adding the <code>--ask-vault-pass</code> to any <code>ansible</code> or <code>ansible-playbook</code> command.</p><pre class=" line-numbers language-shell"><code class="  language-shell">ubuntu@ubuntu_1804:~/palo-ansible/playbooks$ ansible-playbook palo.yml --ask-vault-pass
Vault password: 

PLAY <span class="token punctuation">[</span>Palo Alto Playbook<span class="token punctuation">]</span> ************************************************<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="using-ansible-vault-with-a-password-file">Using Ansible Vault with a Password File</h3><p>If you do not wish to type in the Vault password each time you execute a task, you can add your Vault password to a file and reference the file during execution.</p><pre class=" line-numbers language-shell"><code class="  language-shell">ubuntu@ubuntu_1804:~/palo-ansible/playbooks$ <span class="token builtin class-name">echo</span> <span class="token string">'Cisco123'</span> <span class="token operator">&gt;</span> .vault_pass

ubuntu@ubuntu_1804:~/palo-ansible/playbooks$ <span class="token function">ls</span> -la
total <span class="token number">20</span>
drwxrwxr-x <span class="token number">2</span> ubuntu ubuntu <span class="token number">4096</span> Dec <span class="token number">22</span> <span class="token number">15</span>:27 <span class="token builtin class-name">.</span>
drwxrwxr-x <span class="token number">4</span> ubuntu ubuntu <span class="token number">4096</span> Dec <span class="token number">21</span> <span class="token number">18</span>:03 <span class="token punctuation">..</span>
-rw-rw-r-- <span class="token number">1</span> ubuntu ubuntu   <span class="token number">96</span> Dec <span class="token number">21</span> <span class="token number">18</span>:12 ansible.cfg
-rw-rw-r-- <span class="token number">1</span> ubuntu ubuntu <span class="token number">1931</span> Dec <span class="token number">22</span> <span class="token number">15</span>:05 palo.yml
-rw-rw-r-- <span class="token number">1</span> ubuntu ubuntu    <span class="token number">9</span> Dec <span class="token number">22</span> <span class="token number">15</span>:27 .vault_pass	<span class="token operator">&lt;&lt;&lt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>To make Ansible aware of the password file, you can edit your <code>ansible.cfg</code> file</p><pre class=" line-numbers language-shell"><code class="  language-shell">ubuntu@ubuntu_1804:~/palo-ansible/playbooks$ <span class="token function">cat</span> ansible.cfg 
<span class="token punctuation">[</span>defaults<span class="token punctuation">]</span>
inventory <span class="token operator">=</span> /home/ubuntu/palo-ansible/inventory/host-file
vault_password_file <span class="token operator">=</span> ./.vault_pass<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>Now, when you run commands that require decryption, you will no longer be prompted for the vault password.</p><pre class=" line-numbers language-yml"><code class="  language-yml">ubuntu@ubuntu_1804<span class="token punctuation">:</span>~/palo<span class="token punctuation">-</span>ansible/playbooks$ ansible<span class="token punctuation">-</span>playbook palo.yml

PLAY <span class="token punctuation">[</span>Palo Alto Playbook<span class="token punctuation">]</span> <span class="token important">************************</span>

TASK <span class="token punctuation">[</span>Create Server Object<span class="token punctuation">]</span> <span class="token important">************************</span>
<span class="token key atrule">ok</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>PALO<span class="token punctuation">-</span><span class="token number">1</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><p>Thanks for reading.</p><p>As always, your feedback and comments are more than welcome.</p><h2 id="reference">Reference</h2><p><a href="https://ansible-pan.readthedocs.io/en/latest/">https://ansible-pan.readthedocs.io/en/latest/</a></p><p></p>
                </div>
            </section>


            
            <section class="post-full-comments">
              <div id="disqus_thread"><iframe id="dsq-app2116" name="dsq-app2116" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" width="100%" src="./Palo Alto and Ansible Example_files/saved_resource.html" style="width: 1px !important; min-width: 100% !important; border: none !important; overflow: hidden !important; height: 577px !important;" horizontalscrolling="no" verticalscrolling="no"></iframe></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/

var disqus_config = function () {
this.page.url = 'https://packetswitch.co.uk/palo-alto-and-ansible-example/';
this.page.identifier = "ghost-5fe1e3e9bef6d30435edb9f6"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://packetswitch.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> 
            

        </section></article>

    </div>
</main>

<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
                <article class="read-next-card">
                    <header class="read-next-card-header">
                        <h3><span>More in</span> <a href="https://packetswitch.co.uk/tag/ansible/">ansible</a></h3>
                    </header>
                    <div class="read-next-card-content">
                        <ul>
                            <li>
                                <h4><a href="https://packetswitch.co.uk/ncm-ansible-git/">Network Configuration Backup with Ansible and Git</a></h4>
                                <div class="read-next-card-meta">
                                    <p><time datetime="2020-11-29">29 Nov 2020</time> –
                                        6 min read</p>
                                </div>
                            </li>
                            <li>
                                <h4><a href="https://packetswitch.co.uk/ansible-with-cisco-part-2-ios_config-module/">Ansible with Cisco - Part 2 ios_config module</a></h4>
                                <div class="read-next-card-meta">
                                    <p><time datetime="2020-11-13">13 Nov 2020</time> –
                                        8 min read</p>
                                </div>
                            </li>
                            <li>
                                <h4><a href="https://packetswitch.co.uk/ansible-with-cisco/">Ansible with Cisco - Part 1 Installation and basic set up</a></h4>
                                <div class="read-next-card-meta">
                                    <p><time datetime="2020-11-07">7 Nov 2020</time> –
                                        9 min read</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <footer class="read-next-card-footer">
                        <a href="https://packetswitch.co.uk/tag/ansible/">See all 3 posts
                            →</a>
                    </footer>
                </article>

                <article class="post-card post tag-firewall no-image no-image">


    <div class="post-card-content">

        <a class="post-card-content-link" href="https://packetswitch.co.uk/palo-alto-nat-example/">

            <header class="post-card-header">
                    <div class="post-card-primary-tag">firewall</div>
                <h2 class="post-card-title">Palo Alto NAT Example</h2>
            </header>

            <section class="post-card-excerpt">
                    <p>In this blog post, I will show you how to configure NAT on Palo Alto Firewalls. One of the main functions of the NAT is to translate private IP addresses to globally-routable IP addresses, thereby conserving an organization’s routable IP addresses. NAT examples</p>
            </section>

        </a>

        <footer class="post-card-meta">
            <ul class="author-list">
                <li class="author-list-item">
            
                    <div class="author-name-tooltip">
                        Suresh
                    </div>
            
                    <a href="https://packetswitch.co.uk/author/suresh/" class="static-avatar">
                        <img class="author-profile-image" src="./Palo Alto and Ansible Example_files/56970913_2759945207355156_696597855225249792_o.jpg" alt="Suresh">
                    </a>
                </li>
            </ul>
            <div class="post-card-byline-content">
                <span><a href="https://packetswitch.co.uk/author/suresh/">Suresh</a></span>
                <span class="post-card-byline-date"><time datetime="2021-01-03">3 Jan 2021</time> <span class="bull">•</span> 4 min read</span>
            </div>
        </footer>

    </div>

</article>

                <article class="post-card post tag-ansible no-image no-image">


    <div class="post-card-content">

        <a class="post-card-content-link" href="https://packetswitch.co.uk/ncm-ansible-git/">

            <header class="post-card-header">
                    <div class="post-card-primary-tag">ansible</div>
                <h2 class="post-card-title">Network Configuration Backup with Ansible and Git</h2>
            </header>

            <section class="post-card-excerpt">
                    <p>The typical way you would perform Network Configuration Backup is by using NCM software such as Solarwinds NCM, Rancid, Oxidized etc. However, you can also utilise Ansible and Git to perform the backups. I know it sounds silly, why would anyone do it? But</p>
            </section>

        </a>

        <footer class="post-card-meta">
            <ul class="author-list">
                <li class="author-list-item">
            
                    <div class="author-name-tooltip">
                        Suresh
                    </div>
            
                    <a href="https://packetswitch.co.uk/author/suresh/" class="static-avatar">
                        <img class="author-profile-image" src="./Palo Alto and Ansible Example_files/56970913_2759945207355156_696597855225249792_o.jpg" alt="Suresh">
                    </a>
                </li>
            </ul>
            <div class="post-card-byline-content">
                <span><a href="https://packetswitch.co.uk/author/suresh/">Suresh</a></span>
                <span class="post-card-byline-date"><time datetime="2020-11-29">29 Nov 2020</time> <span class="bull">•</span> 6 min read</span>
            </div>
        </footer>

    </div>

</article>
        </div>
    </div>
</aside>




        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="https://packetswitch.co.uk/">Packetswitch</a> © 2021</section>
                <nav class="site-footer-nav">
                    <a href="https://packetswitch.co.uk/">Latest Posts</a>
                    <a href="https://www.facebook.com/Packetswitch-Networking-Blog-108752930966886" target="_blank" rel="noopener">Facebook</a>
                    <a href="https://twitter.com/tryghost" target="_blank" rel="noopener">Twitter</a>
                    <a href="https://ghost.org/" target="_blank" rel="noopener">Ghost</a>
                </nav>
            </div>
        </footer>

    </div>


    <script src="./Palo Alto and Ansible Example_files/jquery-3.4.1.min.js.download" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous">
    </script>
    <script src="./Palo Alto and Ansible Example_files/casper.js.download"></script>

    <script>
        // Parse the URL parameter
        function getParameterByName(name, url) {
            if (!url) url = window.location.href;
            name = name.replace(/[\[\]]/g, "\\$&");
            var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, " "));
        }

        // Give the parameter a variable name
        var action = getParameterByName('action');

        $(document).ready(function () {
            if (action == 'subscribe') {
                $('body').addClass("subscribe-success");
            }

            $('.subscribe-success-message .subscribe-close').click(function () {
                $('.subscribe-success-message').addClass('close');
            });

            // Reset form on opening subscrion overlay
            $('.subscribe-button').click(function() {
                $('.subscribe-overlay form').removeClass();
                $('.subscribe-email').val('');
            });
        });
    </script>

    <script>
    $(document).ready(function () {
        // FitVids - start
        var $postContent = $(".post-full-content");
        $postContent.fitVids();
        // FitVids - end

        // Replace nav with title on scroll - start
        Casper.stickyNavTitle({
            navSelector: '.site-nav-main',
            titleSelector: '.post-full-title',
            activeClass: 'nav-post-title-active'
        });
        // Replace nav with title on scroll - end

        // Hover on avatar
        var hoverTimeout;
        $('.author-list-item').hover(function () {
            var $this = $(this);

            clearTimeout(hoverTimeout);

            $('.author-card').removeClass('hovered');
            $(this).children('.author-card').addClass('hovered');

        }, function () {
            var $this = $(this);

            hoverTimeout = setTimeout(function () {
                $this.children('.author-card').removeClass('hovered');
            }, 800);
        });
    });
</script>


    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async="" src="./Palo Alto and Ansible Example_files/js"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-163952404-1');
</script>



<script src="./Palo Alto and Ansible Example_files/prism.min.js.download"></script>
<script src="./Palo Alto and Ansible Example_files/prism-hcl.min.js.download"></script> 
<script src="./Palo Alto and Ansible Example_files/prism-bash.min.js.download"></script>
<script src="./Palo Alto and Ansible Example_files/prism-json.min.js.download"></script>
<script src="./Palo Alto and Ansible Example_files/prism-yaml.min.js.download"></script>
<script src="./Palo Alto and Ansible Example_files/prism-powershell.min.js.download"></script>
<script src="./Palo Alto and Ansible Example_files/prism-shell-session.min.js.download"></script>
<script src="./Palo Alto and Ansible Example_files/prism-ini.min.js.download"></script>

<script>
    window.addEventListener('DOMContentLoaded', (event) => {      
        document.querySelectorAll('pre[class*=language-]').forEach(function(node) {
            node.classList.add('line-numbers');
		});
        Prism.highlightAll();
    });
</script>
<script src="./Palo Alto and Ansible Example_files/prism-tomorrow.min.js.download"></script><ins class="adsbygoogle adsbygoogle-noablate" data-adsbygoogle-status="done" style="display: none !important;"><ins id="aswift_0_expand" style="display:inline-table;border:none;height:0px;margin:0;padding:0;position:relative;visibility:visible;width:0px;background-color:transparent;" tabindex="0" title="Advertisement" aria-label="Advertisement"><ins id="aswift_0_anchor" style="display:block;border:none;height:0px;margin:0;padding:0;position:relative;visibility:visible;width:0px;background-color:transparent;"><iframe id="aswift_0" name="aswift_0" style="left:0;position:absolute;top:0;border:0;width:undefinedpx;height:undefinedpx;" sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation" frameborder="0" src="./Palo Alto and Ansible Example_files/ads.html" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" allow="conversion-measurement &#39;src&#39;" data-google-container-id="a!1" data-load-complete="true"></iframe></ins></ins></ins><iframe id="google_osd_static_frame_7457293617718" name="google_osd_static_frame" style="display: none; width: 0px; height: 0px;" src="./Palo Alto and Ansible Example_files/saved_resource(1).html"></iframe>
<script src="./Palo Alto and Ansible Example_files/prism-line-numbers.min.js.download"></script>



<iframe style="display: none;" src="./Palo Alto and Ansible Example_files/saved_resource(2).html"></iframe></body><iframe id="google_esf" name="google_esf" src="./Palo Alto and Ansible Example_files/zrt_lookup.html" data-ad-client="ca-pub-3964009355374916" style="display: none;"></iframe></html>